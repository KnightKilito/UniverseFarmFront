<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cart Page</title>
<!-- <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>-->
 <link rel="preconnect" href="https://fonts.gstatic.com" />
 <link href="static/css/fc1ab68d70ad48e88943ce422f4566dc.css" rel="stylesheet" />
 <link rel="stylesheet" href="static/css/bootstrap.min.css" />
 <link rel="stylesheet" href="static/css/bootstrap-select.min.css" />
 <link rel="stylesheet" href="static/css/animate.min.css" />
 <link rel="stylesheet" href="static/css/all.min.css" />
 <link rel="stylesheet" href="static/css/jarallax.css" />
 <link rel="stylesheet" href="static/css/organik-icons.css" />
 <link rel="stylesheet" href="static/css/jquery.magnific-popup.css" />
 <link rel="stylesheet" href="static/css/nouislider.min.css" />
 <link rel="stylesheet" href="static/css/nouislider.pips.css" />
 <link rel="stylesheet" href="static/css/odometer.min.css" />
 <link rel="stylesheet" href="static/css/swiper.min.css" />
 <link rel="stylesheet" href="static/css/tiny-slider.min.css" />
 <link href="css/common.css" rel="stylesheet" type="text/css" />
 <link href="css/style.css" rel="stylesheet" type="text/css" />
 <script src="js/jquery.SuperSlide.2.1.1.js" type="text/javascript"></script>
 <script src="js/common_js.js" type="text/javascript"></script>
 <script src="js/footer.js" type="text/javascript"></script>
 <script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
 <link rel="stylesheet" href="static/css/organik.css" />
  <script>
   $(document).ready(function(){
   //获取用户输入的登录名字和密码
   // var myname= $("#myname").val();
   // var mypwd=$("#mypwd").val();

   $.ajax({
   url: "http://localhost:8088/UniverseFarmBack/findCart.do",
   dataType:"json",
   type:"get",
   xhrFields: {                               //保存session在跨域访问中不会丢失！！！
   withCredentials: true
  },
   crossDomain: true,
   success:function(result){
    var data=result.carList;
    var i=0;
    var str="";
    for(i;i<data.length;i++)
    {
     str=str+'<tr>'+
             '<td>'+
             '<div className="product-box">'+
             '<img src="static/picture/cart-1-1.jpg" alt="">'+
             ' <h3><a href="product-details.html">'+data.name+'</a></h3>'+
             '</div>'+
             '</td>'+
             '<td>'+$+data.price+'</td>'+
             '<td>'+
             '<div className="quantity-box">'+
             '<button type="button" className="sub">-</button>'+
             '<input type="number" id="2" value="'+data.count+'"/>'+
             '<button type="button" className="add">+</button>'+
             '</div>'+
             '</td>'+
             '<td>'+
             ' '+data.totalMoney+
             '</td>'+
             '<td>'+
             '<i className="organik-icon-close remove-icon"></i>'+
             '</td>'+
             '</tr>'
    }
    $("#cart").html(str);
  }
  });

    $(document).ready(function () {
     $(".numberInput").change(function (){
      // alert($(".numberInput").val());
      var cartId  = $(this).parents("tr").children("td.cartId").text();
      var thisTr = $(this).parents("tr");
      var count = $(this).val();
      console.log(cartId);
      console.log(count);
      data = "cartId="+cartId+"&count="+count;
      $.ajax({
       type: 'post',
       url: "${pageContext.request.contextPath}/cartInfo/updateCart",//action方式
       data: data, //参数，如果参数多，可用date后跟一个大括号
       dataType: 'json',
       success: function (cartInfoList) {//回调函数

        console.log(cartInfoList);
        $("#totalCounts").text(cartInfoList[0]);/*购物车总数*/
        $("#totalCount").text(cartInfoList[0]);/*购物车总数*/
        thisTr.children("td.currentTotalMoney").text(cartInfoList[1])/*当前修改商品的价格*/
        // console.log(thisTr.children("td"));
        $("#cartTotalMoney").text(cartInfoList[2]);/*购物车里面的总价格*/
       }
      });
     });
     $("#payMoney").click(function () {
      // alert($("#IfUserInfoExist").text());
      if($("#IfUserInfoExist").text()==null||$("#IfUserInfoExist").text()==""){
       alert("请先登录！")
       return false;
      }
     });

     $("#payMoney").click(function () {
      // alert($("#IfUserInfoExist").text());
      if($("#IfUserInfoExist").text()!=null&&$("#IfUserInfoExist").text()!=""){
       var totalMoney = '<%= session.getAttribute("totalMoney")%>';
       console.log("totalMoney:::" + totalMoney);
       if( totalMoney == 0){
        alert("您的购物车空空如也！")
        return false;
       }

      }
     });


    });
  })
 </script>
</head>
<body>
<div class="preloader">
<img class="preloader__image" width="55" src="static/picture/loader.png" alt="" />
</div>

<div class="page-wrapper">
<header class="main-header">
<div class="topbar">
<div class="container">
<div class="main-logo">
<a href="personal.html" class="logo">
<img src="static/picture/universe.PNG" width="300" alt="">
</a>
<div class="mobile-nav__buttons">
<a href="#" class="search-toggler"><i class="organik-icon-magnifying-glass"></i></a>
<a href="#" class="mini-cart__toggler"><i class="organik-icon-shopping-cart"></i></a>
</div>
<span class="fa fa-bars mobile-nav__toggler"></span>
</div>
<div class="topbar__left">
<div class="topbar__social">
<a href="#" class="fab fa-twitter"></a>
<a href="#" class="fab fa-facebook-square"></a>
<a href="#" class="fab fa-instagram"></a>
</div>
<div class="topbar__info">
<i class="organik-icon-email"></i>
<p>Email <a href="/cdn-cgi/l/email-protection#b8d1d6ded7f8d7cadfd9d6d1d396dbd7d5"><span class="__cf_email__" data-cfemail="50393e363f103f2237313e393b7e333f3d">[email&#160;protected]</span></a></p>
</div>
</div>
<div class="topbar__right">
<div class="topbar__info">
<i class="organik-icon-calling"></i>
<p>Phone <a href="tel:+92-666-888-0000">92 666 888 0000</a></p>
</div>
<div class="topbar__buttons">
<a href="#" class="search-toggler"><i class="organik-icon-magnifying-glass"></i></a>
<a href="#" class="mini-cart__toggler"><i class="organik-icon-shopping-cart"></i></a>
</div>
</div>
</div>
</div>
<nav class="main-menu">
<div class="container">
<div class="main-menu__login">
</div>
 <ul class="main-menu__list">
  <li class="dropdown">
   <a href="personal.html">个人中心</a>
   <ul>
    <li>
     <a href="personal.html">个人信息修改</a></li>
    <li><a href="index-2.html">发布自己的元产品</a></li>
    <li><a href="index-2.html">显示个人信息</a></li>
    <li><a href="index-2.html">交易记录</a></li>
    <li><a href="index-2.html">个人产品</a></li>
    <!--<li class="dropdown">
    <a href="#">个人模板</a>
    <ul>
    <li><a href="personal.html">个人信息修改</a></li>
    <li><a href="index-2.html">发布自己的元产品</a></li>
     <li><a href="index-2.html">显示个人信息</a></li>
     <li><a href="index-2.html">交易记录</a></li>
     <li><a href="index-2.html">个人产品</a></li>
    </ul> --!>
    </li>
   </ul>
  </li>
  <!--<li>
  <a href="about.html">About</a>
  </li>-->
  <li class="dropdown">
   <a href="products.html">交易市场</a>
   <ul>
    <li><a href="products.html">Shop</a></li>
    <li><a href="product-details.html">Product Details</a></li>
    <li><a href="car.html">Cart Page</a></li>
    <li><a href="checkout.html">Checkout</a></li>
   </ul>
  </li>
  <li class="dropdown"><a href="news.html">购物车</a>
   <ul>
    <li><a href="news.html">购物车</a></li>
    <li><a href="news-details.html">News Details</a></li>
   </ul>
  </li>
  <li><a href="contact.html">个人农场</a></li>
  <li><a href="contact.html">农场社区</a></li>
 </ul>
 <div class="main-menu__language">
  <img src="static/picture/flag.jpg" alt="" width="50">
  <label class="sr-only" for="language-select">选择语言</label>

  <select class="selectpicker" id="language-select-header">
   <option value="english">中文</option>
   <option value="arabic">英文</option>
  </select>
 </div>
</div>
</nav>

</header>
<div class="stricky-header stricked-menu main-menu">
<div class="sticky-header__content"></div>
</div>
<section class="page-header">
<div class="page-header__bg" style="background-image: url(static/images/page-header-bg-1-1.jpg);"></div>

<div class="container">
<h2>购物车</h2>
<ul class="thm-breadcrumb list-unstyled">
<li><a href="personal.html">首页</a></li>
<li>/</li>
<li><span>购物车</span></li>
</ul>
</div>
</section>
<section class="cart-page">
<div class="container">
<div class="table-responsive">
<table class="table cart-table" id="cart">
<thead>
<tr>
<th>商品</th>
<th>价格</th>
<th>数量</th>
<th>总价</th>
<th>删除</th>
</tr>
</thead>
<!--<tbody>-->
<!--<tr>-->
<!--<td>-->
<!--<div class="product-box">-->
<!--<img src="static/picture/cart-1-1.jpg" alt="">-->
<!--<h3><a href="product-details.html">Banana</a></h3>-->
<!--</div>-->
<!--</td>-->
<!--<td>$9.99</td>-->
<!--<td>-->
<!--<div class="quantity-box">-->
<!--<button type="button" class="sub">-</button>-->
<!--<input type="number" id="2" value="1" />-->
<!--<button type="button" class="add">+</button>-->
<!--</div>-->
<!--</td>-->
<!--<td>-->
<!--$9.99-->
<!--</td>-->
<!--<td>-->
<!--<i class="organik-icon-close remove-icon"></i>-->
<!--</td>-->
<!--</tr>-->
<!--<tr>-->
<!--<td>-->
<!--<div class="product-box">-->
<!--<img src="static/picture/cart-1-2.jpg" alt="">-->
<!--<h3><a href="product-details.html">Tomatoes</a></h3>-->
<!--</div>-->
<!--</td>-->
<!--<td>$9.99</td>-->
<!--<td>-->
<!--<div class="quantity-box">-->
<!--<button type="button" class="sub">-</button>-->
<!--<input type="number" id="2" value="1" />-->
<!--<button type="button" class="add">+</button>-->
<!--</div>-->
<!--</td>-->
<!--<td>-->
<!--$9.99-->
<!--</td>-->
<!--<td>-->
<!--<i class="organik-icon-close"></i>-->
<!--</td>-->
<!--</tr>-->
<!--</tbody>-->
</table>
</div>
<div class="row">
<div class="col-lg-8">
<form action="#" class="contact-one__form">
<input type="text" placeholder="优惠码">
<button type="submit" class="thm-btn">申请</button>
</form>
</div>
<div class="col-lg-4">
<ul class="cart-total list-unstyled">
<li>
<span>总价</span>
<span>$19.98 USD</span>
</li>
<li>
<span>商品折扣</span>
<span>$0.00 USD</span>
</li>
<li>
<span>支付</span>
<span>$19.98 USD</span>
</li>
</ul>
<div class="button-box">
<a href="#" class="thm-btn">更新</a>
<a href="#" class="thm-btn">支付</a>
</div>
</div>
</div>
</div>
</section>
<footer class="site-footer background-black-2">
<img src="static/picture/footer-bg-1-1.png" alt="" class="site-footer__shape-1">
<img src="static/picture/footer-bg-1-2.png" alt="" class="site-footer__shape-2">
<div class="container">
<div class="row">
<div class="col-sm-12 col-md-6 col-lg-6 col-xl-3">
<div class="footer-widget footer-widget__about-widget">
<a href="personal.html" class="footer-widget__logo">
<img src="static/picture/universe.PNG" alt="" width="200" height="43">
</a>
<p class="thm-text-dark">Atiam rhoncus sit amet adip
scing sed ipsum. Lorem ipsum
dolor sit amet adipiscing <br>
sem neque.</p>
</div>
</div>
<div class="col-sm-12 col-md-6 col-lg-6 col-xl-2">
<div class="footer-widget footer-widget__contact-widget">
<h3 class="footer-widget__title">Contact</h3>
<ul class="list-unstyled footer-widget__contact">
<li>
<i class="fa fa-phone-square"></i>
<a href="tel:666-888-0000">666 888 0000</a>
</li>
<li>
<i class="fa fa-envelope"></i>
<a href="/cdn-cgi/l/email-protection#a0c9cec6cfe0c3cfcdd0c1ced98ec3cfcd"><span class="__cf_email__" data-cfemail="ddb4b3bbb29dbeb2b0adbcb3a4f3beb2b0">[email&#160;protected]</span></a>
</li>
<li>
<i class="fa fa-map-marker-alt"></i>
<a href="#">66 top broklyn street.
New York</a>
</li>
</ul>
</div>
</div>
<div class="col-sm-12 col-md-6 col-lg-6 col-xl-2">
<div class="footer-widget footer-widget__links-widget">
<h3 class="footer-widget__title">Links</h3>
<ul class="list-unstyled footer-widget__links">
<li>
<a href="personal.html">Top Sellers</a>
</li>
<li>
<a href="products.html">Shopping</a>
</li>
<li>
<a href="about.html">About Store</a>
 </li>
<li>
<a href="contact.html">Contact</a>
</li>
<li>
<a href="contact.html">Help</a>
</li>
</ul>
</div>
</div>
<div class="col-sm-12 col-md-6 col-lg-6 col-xl-2">
<div class="footer-widget">
<h3 class="footer-widget__title">Explore</h3>
<ul class="list-unstyled footer-widget__links">
<li>
<a href="products.html">New Products</a>
</li>
<li>
<a href="checkout.html">My Account</a>
</li>
<li>
<a href="contact.html">Support</a>
</li>
<li>
<a href="contact.html">FAQs</a>
</li>
</ul>
</div>
</div>
<div class="col-sm-12 col-md-6 col-lg-6 col-xl-3">
<div class="footer-widget">
<h3 class="footer-widget__title">Newsletter</h3>
<form action="#" data-url="YOUR_MAILCHIMP_URL" class="mc-form">
<input type="email" name="EMAIL" id="mc-email" placeholder="Email Address">
<button type="submit">Subscribe</button>
</form>
<div class="mc-form__response"></div>
</div>
</div>
</div>
</div>
<div class="bottom-footer">
<div class="container">
<hr>
<div class="inner-container text-center">
<div class="bottom-footer__social">
<a href="#" class="fab fa-twitter"></a>
<a href="#" class="fab fa-facebook-square"></a>
<a href="#" class="fab fa-instagram"></a>
</div>
<p class="thm-text-dark">Copyright &copy; 2021.Company name All rights reserved.<a target="_blank" href="https://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
</div>
</div>
</div>
</footer>
</div>
<div class="mobile-nav__wrapper">
<div class="mobile-nav__overlay mobile-nav__toggler"></div>

<div class="mobile-nav__content">
<span class="mobile-nav__close mobile-nav__toggler"><i class="organik-icon-close"></i></span>
<div class="logo-box">
<a href="personal.html" aria-label="logo image"><img src="static/picture/logo-light.png" width="155" alt="" /></a>
</div>

<div class="mobile-nav__container"></div>

<ul class="mobile-nav__contact list-unstyled">
<li>
<i class="organik-icon-email"></i>
 <a href="/cdn-cgi/l/email-protection#7e101b1b1a161b120e3e110c191f101715501d1113"><span class="__cf_email__" data-cfemail="741a1111101c111804341b0613151a1d1f5a171b19">[email&#160;protected]</span></a>
</li>
<li>
<i class="organik-icon-calling"></i>
<a href="tel:666-888-0000">666 888 0000</a>
</li>
</ul>
<div class="mobile-nav__top">
<div class="mobile-nav__language">
<img src="static/picture/flag-1-1.jpg" alt="">
<label class="sr-only" for="language-select">select language</label>

<select class="selectpicker" id="language-select">
<option value="english">English</option>
<option value="arabic">Arabic</option>
</select>
</div>
<div class="main-menu__login">
<a href="#"><i class="organik-icon-user"></i>Login / Register</a>
</div>
</div>
</div>

</div>

<div class="mini-cart">
<div class="mini-cart__overlay mini-cart__toggler"></div>
<div class="mini-cart__content">
<div class="mini-cart__top">
<h3 class="mini-cart__title">Shopping Cart</h3>
<span class="mini-cart__close mini-cart__toggler"><i class="organik-icon-close"></i></span>
</div>
<div class="mini-cart__item">
<img src="static/picture/cart-1-1.jpg" alt="">
<div class="mini-cart__item-content">
<div class="mini-cart__item-top">
<h3><a href="product-details.html">Banana</a></h3>
<p>$9.99</p>
</div>
<div class="quantity-box">
<button type="button" class="sub">-</button>
<input type="number" id="2" value="1" />
<button type="button" class="add">+</button>
</div>
</div>
</div>
<div class="mini-cart__item">
<img src="static/picture/cart-1-2.jpg" alt="">
<div class="mini-cart__item-content">
<div class="mini-cart__item-top">
<h3><a href="product-details.html">Tomato</a></h3>
<p>$9.99</p>
</div>
<div class="quantity-box">
<button type="button" class="sub">-</button>
<input type="number" id="2" value="1" />
<button type="button" class="add">+</button>
</div>
</div>
</div>
<div class="mini-cart__item">
<img src="static/picture/cart-1-3.jpg" alt="">
<div class="mini-cart__item-content">
<div class="mini-cart__item-top">
<h3><a href="product-details.html">Bread</a></h3>
<p>$9.99</p>
</div>
<div class="quantity-box">
<button type="button" class="sub">-</button>
<input type="number" id="2" value="1" />
<button type="button" class="add">+</button>
</div>
</div>
</div>
<a href="checkout.html" class="thm-btn mini-cart__checkout">Proceed To Checkout</a>
</div>
</div>
<div class="search-popup">
<div class="search-popup__overlay search-toggler"></div>

<div class="search-popup__content">
<form action="#">
<label for="search" class="sr-only">search here</label>
<input type="text" id="search" placeholder="Search Here..." />
<button type="submit" aria-label="search submit" class="thm-btn">
<i class="organik-icon-magnifying-glass"></i>
</button>
</form>
</div>

</div>

<a href="#" data-target="html" class="scroll-to-target scroll-to-top"><i class="fa fa-angle-up"></i></a>
<script src="static/js/jquery-3.5.1.min.js"></script>
<script src="static/js/bootstrap.bundle.min.js"></script>
<script src="static/js/bootstrap-select.min.js"></script>
<script src="static/js/jarallax.min.js"></script>
<script src="static/js/jquery.ajaxchimp.min.js"></script>
<script src="static/js/jquery.appear.min.js"></script>
<script src="static/js/jquery.circle-progress.min.js"></script>
<script src="static/js/jquery.magnific-popup.min.js"></script>
<script src="static/js/jquery.validate.min.js"></script>
<script src="static/js/nouislider.min.js"></script>
<script src="static/js/odometer.min.js"></script>
<script src="static/js/swiper.min.js"></script>
<script src="static/js/tiny-slider.min.js"></script>
<script src="static/js/wnumb.min.js"></script>
<script src="static/js/wow.js"></script>
<script src="static/js/isotope.js"></script>
<script src="static/js/countdown.min.js"></script>

<script src="static/js/organik.js"></script>
</body>
</html>